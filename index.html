<!DOCTYPE html>
<html>
<head>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Aspect Ratio Calculator</title>
</head>
<body>
    <div class="container">
        <h2 class="mt-4 ms-1">Calculate Aspect Ratio</h2>
        <form class="row g-3" id="aspectForm">
            <div class="col-md-4">
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Length</span>
                    <input type="number" min="1" step=1 required placeholder="length" aria-label="length" class="form-control" id="num1">
                </div>
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Width</span>
                    <input type="number" min="1" step=1 required placeholder="width" aria-label="width" class="form-control" id="num2">
                </div>
                <button class="btn btn-primary w-100 ms-1" type="submit">Calculate Ratio</button>
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Ratio</span>
                    <input type="text" class="form-control" id="ratio" readonly value="...">
                </div>
                <input class="btn btn-danger w-100 ms-1" type="reset" value="Clear">   
            </div>
        </form>

        <h2 class="mt-4 ms-1">Calculate Length/Width</h2>
        <form class="row g-3">
            <div class="col-md-4">
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Length</span>
                    <input type="number" min="1" step=0.01 placeholder="length" aria-label="length" class="form-control" id="lenghtFromWidth">
                </div>
                <button class="btn btn-primary w-100 ms-1" type="button" onclick="lengthFromWidth()">Calculate Length</button>
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Ratio</span>
                    <input type="number" min="1" placeholder="larger" aria-label="ratio" class="form-control" id="lenghtWidthRatioLeft">
                    <span class="input-group-text">:</span>
                    <input type="number" min="1" placeholder="smaller" aria-label="ratio" class="form-control" id="lenghtWidthRatioRight">
                </div>        
                <button class="btn btn-primary w-100 ms-1" type="button" onclick="widthFromlength()">Calculate Width</button>
                <div class="input-group m-1">
                    <span class="input-group-text w-25">Width</span>
                    <input type="number" min="1" step=0.01 placeholder="width" aria-label="width" class="form-control" id="widthFromLength">
                </div>
                <input class="btn btn-danger w-100 ms-1" type="reset" value="Clear">   
            </div>
        </form>
    </div>

    <script>
        window.onload = function () {
            document.getElementById("aspectForm").onsubmit = calculateAspectRatio;
        };

        function isValidPositiveNumber(num) {
            if (Number.isNaN(num) || num <= 0) {
                return false;
            }
            return true;
        }

        function gcd(a, b) {
            const rem = a % b;
            if (rem === 0) {
                return b;
            }
            return gcd(b, rem);
        }

        function calculateAspectRatio(event) {
            event.preventDefault();
            const num1 = Number.parseFloat(document.getElementById("num1").value);
            const num2 = Number.parseFloat(document.getElementById("num2").value);

            if (!isValidPositiveNumber(num1) || !isValidPositiveNumber(num2)) {
                return;
            }
            
            const numerator = num1 > num2 ? num1 : num2;
            const denominator = num1 > num2 ? num2 : num1;
            const divisor = gcd(numerator, denominator);
            const left = numerator / divisor;
            const right = denominator / divisor;
            document.getElementById("ratio").value = `${left}:${right}`;
        }

        function lengthFromWidth() {
            const width = Number.parseFloat(document.getElementById("widthFromLength").value).toFixed(2);
            const rat1 = Number.parseInt(document.getElementById("lenghtWidthRatioLeft").value);
            const rat2 = Number.parseInt(document.getElementById("lenghtWidthRatioRight").value);

            if (!isValidPositiveNumber(width) || !isValidPositiveNumber(rat1) || !isValidPositiveNumber(rat2)) {
                return;
            }

            const ratioLeft = rat1 > rat2 ? rat1 : rat2;
            const ratioRight = rat1 > rat2 ? rat2 : rat1;

            document.getElementById("lenghtFromWidth").value = ((width / ratioRight) * ratioLeft).toFixed(2);
        }

        function widthFromlength() {
            const length = Number.parseFloat(document.getElementById("lenghtFromWidth").value).toFixed(2);
            const rat1 = Number.parseInt(document.getElementById("lenghtWidthRatioLeft").value);
            const rat2 = Number.parseInt(document.getElementById("lenghtWidthRatioRight").value);

            if (!isValidPositiveNumber(length) || !isValidPositiveNumber(rat1) || !isValidPositiveNumber(rat2)) {
                return;
            }

            const ratioLeft = rat1 > rat2 ? rat1 : rat2;
            const ratioRight = rat1 > rat2 ? rat2 : rat1;

            document.getElementById("widthFromLength").value =  ((length / ratioLeft) * ratioRight).toFixed(2);
        }
    </script>
</body>
</html>
